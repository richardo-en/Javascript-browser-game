var player,created_cars=[],created_aditionals=[],stop_generating=!1,stop=!1;let timeoutId;var timer,time_value,level,animated_car,index,level_maker,power_up_called=!1,active_game=!1;function game_run(){return active_game}function stop_all_elements(){player.notify("stop"),active_game=!1,level_maker.animate=!1,document.getElementById("background_image").style.animation="none"}function resume_all_elements(){player.notify("continue"),active_game=!0,level_maker.animate=!0,document.getElementById("background_image").style.animation="moveBackground 4s linear infinite"}function unsubscribe(e,t){if("car"==t){let t=created_cars.indexOf(e);created_cars.splice(t,1)}else if("additional"==t){let t=created_aditionals.indexOf(e);created_aditionals.splice(t,1)}delete e}function set_time(e){return 2*(document.getElementById("main_canvas").clientHeight-75)/e*5}function power_up(){player.notify("powerup")}function stop_animation(e){stop_all_elements(),document.getElementById("background_image").style.animation="none",player.stop_move_right(),player.stop_move_left(),3==index&&clearInterval(animated_car),delete player,clearTimeout(timeoutId),clearInterval(timer),setTimeout((function(){"lose"==e?draw_game_screen(e):"win"==e&&(draw_game_screen(e),level<3&&(increase_level(level),load_levels(level))),close_level()}),100)}function countdown(e){var t=60;1==e?t=15:2==e&&(t=30);var a=document.getElementById("timer_text");timer=setInterval((function(){a.textContent=t,active_game&&t--,0==t?(clearInterval(timer),setTimeout((function(){level_maker.move_back(player)}),2e3)):2==t&&(stop_generating=!0)}),1e3)}function car_sound(){const e=document.createElement("audio");e.id="car_sound",e.src="../../../static/sounds/car_sound.mp3",e.volume=get_volume()/100,e.loop=!0,document.body.appendChild(e),e.play()}function start_game(){remove_all_elements(),play_sound("../../../static/sounds/button_click.mp3"),car_sound(),document.getElementById("my_audio").pause(),time_value=2400,active_game=!0,document.getElementById("background_image").style.animation="moveBackground 2s linear infinite";var e=JSON.parse(getCookie("skins")),t=document.querySelectorAll(".skin_button"),a=document.getElementById("selected_skin");index=Array.prototype.indexOf.call(t,a);var n=0;index<3?player=new Player("../../../static/images/cars/police/"+e[index].link[0]):(player=new Player("../../../static/images/cars/police/"+e[index].link[n]),animated_car=setInterval((function(){1==active_game&&(0==n?n++:n--,player.change_image("../../../static/images/cars/police/"+e[index].link[n]))}),350)),level_maker=new Levels(0);t=document.getElementsByClassName("lvl_button");for(let e=0;e<t.length;e++)if("selected"==t[e].id){level=parseInt(t[e].textContent,10);break}var l=document.createElement("div"),i=document.createElement("p");i.id="timer_text",l.appendChild(i),l.id="timer",document.body.appendChild(l),countdown(level),function e(){let t=player.calculate_line();if(0==stop_generating){if(active_game)if(level_maker.line=t,1==level)1==t||6==t?level_maker.easy_algorythm_1(player,created_cars,created_aditionals,2.5):2==t||5==t?level_maker.easy_algorythm_2(player,created_cars,created_aditionals,2.5):3!=t&&4!=t||level_maker.easy_algorythm_3(player,created_cars,created_aditionals,2.5);else if(2==level)1==t||6==t?level_maker.medium_algorythm_1(player,created_cars,created_aditionals,3.5):2==t||5==t?level_maker.medium_algorythm_2(player,created_aditionals,3.5):3!=t&&4!=t||level_maker.medium_algorythm_3(player,created_cars,created_aditionals,3.5);else{level_maker[`hard_algorythm_${t}`](player,created_cars,created_aditionals,3.5)}timeoutId=setTimeout(e,time_value),time_value=set_time(level_maker.speed)}}(),set_time()}function reset(){created_cars=[],stop_generating=!1}function close_level(){created_cars=[],created_aditionals=[],active_game=!1,stop_generating=!1,document.getElementById("car_sound").remove(),document.getElementById("timer").remove()}function get_stop_value(){return stop}