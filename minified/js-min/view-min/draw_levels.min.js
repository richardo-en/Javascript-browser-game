var canvas=document.getElementById("main_canvas");class Levels{constructor(e){this.line=e,this.animate=!0,this.animateFrame,this.y_pos=0,this.size=10,this.bottom,this.additionals=[],this.speed}easy_algorythm_1(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,0,this.get_car(),e)),i.push(new Cars(this.speed,1,180,this.get_car(),e)),i.push(new Cars(this.speed,5,0,this.get_car(),e)),i.push(new Cars(this.speed,4,180,this.get_car(),e)),1==this.line?(i.push(new Cars(this.speed,4,0,this.get_car(),e)),i.push(new Cars(this.speed,3,200,this.get_car(),e))):6==this.line&&(i.push(new Cars(this.speed,1,0,this.get_car(),e)),i.push(new Cars(this.speed,2,200,this.get_car(),e))),this.append_and_subscribe(e,i)}easy_algorythm_2(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,300,this.get_car(),e)),i.push(new Cars(this.speed,0,450,this.get_car(),e)),i.push(new Cars(this.speed,1,0,this.get_car(),e)),i.push(new Cars(this.speed,4,0,this.get_car(),e)),i.push(new Cars(this.speed,5,300,this.get_car(),e)),i.push(new Cars(this.speed,5,450,this.get_car(),e)),2==this.line?(i.push(new Cars(this.speed,41,200,this.get_car(),e)),i.push(new Cars(this.speed,2,300,this.get_car(),e))):5==this.line&&(i.push(new Cars(this.speed,1,200,this.get_car(),e)),i.push(new Cars(this.speed,3,300,this.get_car(),e))),this.append_and_subscribe(e,i)}easy_algorythm_3(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,300,this.get_car(),e)),i.push(new Cars(this.speed,2,0,this.get_car(),e)),i.push(new Cars(this.speed,3,0,this.get_car(),e)),i.push(new Cars(this.speed,5,300,this.get_car(),e)),3==this.line?(i.push(new Cars(this.speed,1,0,this.get_car(),e)),i.push(new Cars(this.speed,2,200,this.get_car(),e)),i.push(new Cars(this.speed,4,400,this.get_car(),e))):4==this.line&&(i.push(new Cars(this.speed,4,0,this.get_car(),e)),i.push(new Cars(this.speed,3,200,this.get_car(),e)),i.push(new Cars(this.speed,1,400,this.get_car(),e))),this.append_and_subscribe(e,i)}medium_algorythm_1(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,300,this.get_car(),e)),i.push(new Cars(this.speed,2,450,this.get_car(),e)),i.push(new Cars(this.speed,3,450,this.get_car(),e)),i.push(new Cars(this.speed,5,300,this.get_car(),e)),1==this.line?(i.push(new Cars(this.speed,1,100,this.get_car(),e)),i.push(new Cars(this.speed,3,100,this.get_car(),e)),i.push(new Cars(this.speed,5,0,this.get_car(),e))):6==this.line&&(i.push(new Cars(this.speed,4,100,this.get_car(),e)),i.push(new Cars(this.speed,2,100,this.get_car(),e)),i.push(new Cars(this.speed,0,0,this.get_car(),e))),this.append_and_subscribe(e,i)}medium_algorythm_2(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,450,this.get_car(),e)),i.push(new Cars(this.speed,5,450,this.get_car(),e)),2==this.line?(i.push(new Cars(this.speed,0,300,this.get_car(),e)),i.push(new Cars(this.speed,1,0,this.get_car(),e)),i.push(new Cars(this.speed,2,450,this.get_car(),e)),i.push(new Cars(this.speed,2,0,this.get_car(),e)),i.push(new Cars(this.speed,3,350,this.get_car(),e)),i.push(new Cars(this.speed,4,0,this.get_car(),e)),i.push(new Cars(this.speed,4,200,this.get_car(),e))):5==this.line&&(i.push(new Cars(this.speed,5,300,this.get_car(),e)),i.push(new Cars(this.speed,4,0,this.get_car(),e)),i.push(new Cars(this.speed,3,450,this.get_car(),e)),i.push(new Cars(this.speed,3,0,this.get_car(),e)),i.push(new Cars(this.speed,2,350,this.get_car(),e)),i.push(new Cars(this.speed,1,0,this.get_car(),e)),i.push(new Cars(this.speed,1,200,this.get_car(),e))),this.append_and_subscribe(e,i)}medium_algorythm_3(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,450,this.get_car(),e)),i.push(new Cars(this.speed,5,450,this.get_car(),e)),i.push(new Cars(this.speed,2,50,this.get_car(),e)),i.push(new Cars(this.speed,3,50,this.get_car(),e)),3==this.line?(i.push(new Cars(this.speed,1,200,this.get_car(),e)),i.push(new Cars(this.speed,5,0,this.get_car(),e)),i.push(new Cars(this.speed,4,350,this.get_car(),e)),i.push(new Cars(this.speed,3,400,this.get_car(),e))):4==this.line&&(i.push(new Cars(this.speed,4,200,this.get_car(),e)),i.push(new Cars(this.speed,0,0,this.get_car(),e)),i.push(new Cars(this.speed,1,350,this.get_car(),e)),i.push(new Cars(this.speed,2,400,this.get_car(),e))),this.append_and_subscribe(e,i)}hard_algorythm_1(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,50,this.get_car(),e)),i.push(new Cars(this.speed,1,250,this.get_car(),e)),i.push(new Cars(this.speed,2,50,this.get_car(),e)),i.push(new Cars(this.speed,3,300,this.get_car(),e)),i.push(new Cars(this.speed,4,50,this.get_car(),e)),i.push(new Cars(this.speed,4,350,this.get_car(),e)),i.push(new Cars(this.speed,5,150,this.get_car(),e)),this.append_and_subscribe(e,i)}hard_algorythm_2(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,50,this.get_car(),e)),i.push(new Cars(this.speed,0,350,this.get_car(),e)),i.push(new Cars(this.speed,1,100,this.get_car(),e)),i.push(new Cars(this.speed,2,250,this.get_car(),e)),i.push(new Cars(this.speed,3,0,this.get_car(),e)),i.push(new Cars(this.speed,4,50,this.get_car(),e)),i.push(new Cars(this.speed,4,480,this.get_car(),e)),i.push(new Cars(this.speed,5,430,this.get_car(),e)),this.append_and_subscribe(e,i)}hard_algorythm_3(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,380,this.get_car(),e)),i.push(new Cars(this.speed,1,50,this.get_car(),e)),i.push(new Cars(this.speed,1,450,this.get_car(),e)),i.push(new Cars(this.speed,2,0,this.get_car(),e)),i.push(new Cars(this.speed,2,150,this.get_car(),e)),i.push(new Cars(this.speed,3,50,this.get_car(),e)),i.push(new Cars(this.speed,3,200,this.get_car(),e)),i.push(new Cars(this.speed,5,200,this.get_car(),e)),i.push(new Cars(this.speed,5,400,this.get_car(),e)),this.append_and_subscribe(e,i)}hard_algorythm_4(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,50,this.get_car(),e)),i.push(new Cars(this.speed,0,300,this.get_car(),e)),i.push(new Cars(this.speed,1,0,this.get_car(),e)),i.push(new Cars(this.speed,2,200,this.get_car(),e)),i.push(new Cars(this.speed,3,50,this.get_car(),e)),i.push(new Cars(this.speed,3,250,this.get_car(),e)),i.push(new Cars(this.speed,4,250,this.get_car(),e)),i.push(new Cars(this.speed,5,50,this.get_car(),e)),this.append_and_subscribe(e,i)}hard_algorythm_5(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,500,this.get_car(),e)),i.push(new Cars(this.speed,1,150,this.get_car(),e)),i.push(new Cars(this.speed,2,50,this.get_car(),e)),i.push(new Cars(this.speed,2,200,this.get_car(),e)),i.push(new Cars(this.speed,3,250,this.get_car(),e)),i.push(new Cars(this.speed,4,0,this.get_car(),e)),i.push(new Cars(this.speed,5,150,this.get_car(),e)),i.push(new Cars(this.speed,5,450,this.get_car(),e)),this.append_and_subscribe(e,i)}hard_algorythm_6(e,s,t,h){var i=[];this.speed=h,i.push(new Cars(this.speed,0,50,this.get_car(),e)),i.push(new Cars(this.speed,0,300,this.get_car(),e)),i.push(new Cars(this.speed,1,500,this.get_car(),e)),i.push(new Cars(this.speed,2,0,this.get_car(),e)),i.push(new Cars(this.speed,2,450,this.get_car(),e)),i.push(new Cars(this.speed,3,0,this.get_car(),e)),i.push(new Cars(this.speed,4,100,this.get_car(),e)),i.push(new Cars(this.speed,5,300,this.get_car(),e)),this.append_and_subscribe(e,i)}get_car(){return"../../../static/images/cars/"+["blue","green","purple","red","yellow"][Math.floor(5*Math.random())]+"_car.webp"}append_and_subscribe(e,s){this.generate_additionals(s,e);for(let t=0;t<s.length;t++)s[t].move_back(),e.subscribe(s[t])}create_additionals(e,s,t,h){if(1>Math.floor(6*Math.random())){var i=new Additionals(this.speed,e,s,"boost",t);h.push(i),t.subscribe(i)}else{var i=new Additionals(this.speed,e,s,"coin",t);h.push(i),t.subscribe(i)}}generate_additionals(e,s){var t=!1,h=!1,i=!0,p=Math.floor(5*Math.random()+1),a=[];for(let n=0;n<p;n++){var r=Math.floor(5*Math.random()),$=0,d=[];for(let c=0;c<e.length;c++){var g=e[c];g.lane==r&&d.push(g)}for(;!1==t;)if(d.length>0){for(let u=0;u<d.length;u++){let w=$+50,l=d[u].position.y+canvas.clientHeight,o=d[u].position.y+120+canvas.clientHeight;if($<=l&&w>=l||$>=l&&w<=o||$<=o&&w>=o||$==l||w==o){$+=50,i=!1,h=!0;break}}if(a.length>0&&!1==h){for(let _=0;_<a.length;_++)if($+100>=a[_].position.y+canvas.clientHeight&&$<=a[_].position.y+canvas.clientHeight||$<=a[_].position.y+canvas.clientHeight+100&&$>=a[_].position.y+canvas.clientHeight){i=!1,h=!0,$+=50;break}}if(!0==h){if($>canvas.clientHeight-150)break;h=!1,i=!0;continue}if(!0==i&&!1==h?(this.create_additionals(r,$,s,a),t=!0):($+=25,h=!1,i=!0),$>canvas.clientHeight)break}else 0==d.length&&(this.create_additionals(r,$,s,a),t=!0);t=!1,d=[]}}draw_finish_line(e,s,t,h){ctx.beginPath();var i,p="black";for(let a=0;a<h;a++){for(let n=0;n<canvas.clientWidth/e;n++)0==n&&(i=p),"black"==p?(ctx.fillStyle=p,p="white"):(ctx.fillStyle=p,p="black"),ctx.fillRect(s+n*e,t+a*e,e,e);p="black"==i?"white":"black"}}move_back(e){this.y_pos=0,this.animateFrame=()=>{this.animate?(ctx.clearRect(0,this.y_pos-this.size,canvas.clientWidth,8*this.size),this.draw_finish_line(this.size,0,this.y_pos,8),this.check_collision(e),setTimeout(this.animateFrame,50),this.y_pos+=this.size,this.bottom=this.y_pos+8*this.size):!1==game_run()&&setTimeout(this.animateFrame,5)},this.animateFrame()}check_collision(e){this.bottom>=e.position.y&&(cancelAnimationFrame(this.animateFrame),this.animateFrame=null,ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight),stop_animation("win"),play_sound("../../../static/sounds/win_level.wav"))}}