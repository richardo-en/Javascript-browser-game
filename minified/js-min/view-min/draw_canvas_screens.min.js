var screen=null,canvas=document.getElementById("main_canvas"),canvas=document.getElementById("main_canvas"),ctx=canvas.getContext("2d");class Canvas_parent{constructor(){this.positions=[],this.button_height=40,this.ctx=canvas.getContext("2d"),this.position_x=canvas.clientWidth/4,this.width=canvas.clientWidth/2,this.position_y=canvas.clientHeight/4,this.height=canvas.clientHeight/2}draw_button(t){this.ctx.beginPath(),this.ctx.roundRect(this.position_x+50,this.position_y+this.button_height,this.width-100,this.button_height,[10]),this.ctx.fillStyle="#FAF1A2",this.ctx.fill(),this.ctx.lineWidth=2,this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.closePath(),this.ctx.font="20pt Kremlin Pro Web",this.ctx.fillStyle="#000000",this.ctx.textAlign="center",this.ctx.fillText(t,this.position_x+this.width/2,this.position_y+1.7*this.button_height,this.width),this.positions.push([this.position_x+50,this.position_y+this.button_height,this.position_x+this.width-50,this.position_y+2*this.button_height]),this.position_y+=60}draw_button_with_custom_positions(t,i,e,s,n){this.ctx.beginPath(),this.ctx.roundRect(i,e,s,n,[15]),this.ctx.fillStyle="#FAF1A2",this.ctx.fill(),this.ctx.lineWidth=3,this.ctx.strokeStyle="#202020",this.ctx.stroke(),this.ctx.closePath(),this.ctx.font="20pt Kremlin Pro Web",this.ctx.fillStyle="#202020",this.ctx.textAlign="center",this.ctx.fillText(t,i+s/2,e+n/1.5,s)}draw_background(t){this.ctx.beginPath(),this.ctx.roundRect(this.position_x,this.position_y,this.width,this.height,[5]),this.ctx.strokeStyle="#CFBA42",this.ctx.fillStyle="#FFFFFF",this.ctx.lineWidth=5,this.ctx.fill(),this.ctx.drawImage(t,this.position_x,this.position_y+this.height/3,this.width,this.height-this.height/3),this.ctx.stroke(),this.ctx.closePath()}draw_canvas_title(t){let i=(this.width-t.width)/2+this.position_x;this.ctx.drawImage(t,i,this.position_y+20),this.position_y+=t.height}clear_screen(){this.ctx.clearRect(0,0,1e3,600)}get_positions(){return this.positions}}class Canvas_screens extends Canvas_parent{constructor(){super(),this.type=null,this.image=new Image,this.background_image=new Image,this.background_image.src="../../../static/images/screen_background.webp"}losing_screen(){canvas.className="touchable",this.type="lose",this.image.src="../../../static/images/lose_screen_image.webp",this.background_image.addEventListener("load",()=>{this.draw_background(this.background_image)}),this.image.addEventListener("load",()=>{this.draw_canvas_title(this.image),this.draw_button("Main Menu"),this.draw_button("Try again")})}winning_screen(){canvas.className="touchable",this.type="win",this.image.src="../../../static/images/win_screen_image.webp",this.background_image.addEventListener("load",()=>{this.draw_background(this.background_image)}),this.image.addEventListener("load",()=>{this.draw_canvas_title(this.image),this.draw_button("Next level"),this.draw_button("Main Menu"),this.draw_button("Repeat level")})}break_screen(){canvas.className="touchable",this.type="break",this.image.src="../../../static/images/pause_screen_image.webp",this.background_image.addEventListener("load",()=>{this.draw_background(this.background_image)}),this.image.addEventListener("load",()=>{this.draw_canvas_title(this.image),this.draw_button("Continue"),this.draw_button("Main Menu")})}help_screen(){canvas.className="help_screen";let t=100,i=[new Image,new Image,new Image,new Image,new Image,new Image];i[0].src="../../../static/images/movement_left_settings.webp",i[1].src="../../../static/images/movement_right_settings.webp",i[2].src="../../../static/images/pause_screen_image.webp",i[3].src="../../../static/images/Keyboard_left.webp",i[4].src="../../../static/images/Keyboard_right.webp",i[5].src="../../../static/images/pause_key.webp",i[5].addEventListener("load",()=>{this.clear_screen(),this.ctx.beginPath(),this.ctx.roundRect(20,20,canvas.width-40,canvas.height-40,[25]),this.ctx.fillStyle="#596a85",this.ctx.fill(),this.draw_button_with_custom_positions("Back to main menu",canvas.width/2-120,canvas.height-100,240,45);for(let e=0;e<3;e++)ctx.drawImage(i[e],100,t,i[e].width,i[e].height),ctx.drawImage(i[e+3],150+i[e].width,t,i[e].height,i[e].height),t+=i[e].height+20;this.ctx.closePath(),ctx.font="20px Arial",ctx.fillStyle="white",ctx.fillText("In this game you have to dodge cars for predifined time.",500,400),ctx.fillText("You can complete missions, collect coins, collect skins and compete in leader board",500,420),ctx.fillText("You can use only 3 controllers and set these controlles as you wish. Have fun :)",500,450)})}get_type(){return this.type}}function draw_game_screen(t){remove_all_elements(),"lose"==t?(screen=new Canvas_screens).losing_screen():"win"==t?(screen=new Canvas_screens).winning_screen():"break"==t&&(screen=new Canvas_screens).break_screen()}function get_screen(){return screen}